{
  "kind": "idlfile",
  "contents": [
    {
      "kind": "ANY_COMMENT_$0",
      "doc": {
        "kind": "DOC_COMMENT",
        "contents": "/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */"
      }
    },
    {
      "kind": "INCLUDE",
      "ident": "nsISupports"
    },
    {
      "kind": "interface_main",
      "doc_comment": null,
      "attrs": {
        "kind": "attributes",
        "first_attribute": {
          "kind": "attribute",
          "name": "scriptable",
          "param": null
        },
        "other_attributes": [
          {
            "kind": "attributes_$0",
            "attr": {
              "kind": "attribute",
              "name": "uuid",
              "param": {
                "kind": "attribute_$0",
                "value": "e61b5d39-f6d6-4ed3-aead-1213b24c6f27"
              }
            }
          }
        ]
      },
      "name": "nsITRRSkipReason",
      "base": {
        "kind": "ifacebase",
        "extends": "nsISupports"
      },
      "body": {
        "kind": "ifacebody",
        "contents": {
          "kind": "ifacebody_$0",
          "contents": [
            {
              "kind": "ifacebody_$0_$0",
              "contents": {
                "kind": "member_$0",
                "docComment": [
                  {
                    "kind": "SINGLE_LINE_COMMENT"
                  },
                  {
                    "kind": "SINGLE_LINE_COMMENT"
                  },
                  {
                    "kind": "SINGLE_LINE_COMMENT"
                  },
                  {
                    "kind": "SINGLE_LINE_COMMENT"
                  }
                ],
                "code": {
                  "kind": "enum_code",
                  "name": "value",
                  "base": "32",
                  "values": {
                    "kind": "cenumlist",
                    "first_value": {
                      "kind": "cenum",
                      "comment": [],
                      "identifier": "TRR_UNSET",
                      "value": {
                        "kind": "cenum_$0",
                        "value": "0"
                      }
                    },
                    "other_values": [
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_OK",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "1"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_NO_GSERVICE",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "2"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_PARENTAL_CONTROL",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "3"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_OFF_EXPLICIT",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "4"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_REQ_MODE_DISABLED",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "5"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_MODE_NOT_ENABLED",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "6"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_FAILED",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "7"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_MODE_UNHANDLED_DEFAULT",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "8"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_MODE_UNHANDLED_DISABLED",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "9"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_DISABLED_FLAG",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "10"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_TIMEOUT",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "11"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_CHANNEL_DNS_FAIL",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "12"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_IS_OFFLINE",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "13"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_NOT_CONFIRMED",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "14"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_DID_NOT_MAKE_QUERY",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "15"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_UNKNOWN_CHANNEL_FAILURE",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "16"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_HOST_BLOCKED_TEMPORARY",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "17"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_SEND_FAILED",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "18"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_NET_RESET",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "19"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_NET_TIMEOUT",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "20"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_NET_REFUSED",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "21"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_NET_INTERRUPT",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "22"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_NET_INADEQ_SEQURITY",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "23"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_NO_ANSWERS",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "24"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_DECODE_FAILED",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "25"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_EXCLUDED",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "26"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_SERVER_RESPONSE_ERR",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "27"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_RCODE_FAIL",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "28"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_NO_CONNECTIVITY",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "29"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_NXDOMAIN",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "30"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_REQ_CANCELLED",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "31"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "ODOH_KEY_NOT_USABLE",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "32"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "ODOH_UPDATE_KEY_FAILED",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "33"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "ODOH_KEY_NOT_AVAILABLE",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "34"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "ODOH_ENCRYPTION_FAILED",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "35"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "ODOH_DECRYPTION_FAILED",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "36"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_HEURISTIC_TRIPPED_GOOGLE_SAFESEARCH",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "37"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_HEURISTIC_TRIPPED_YOUTUBE_SAFESEARCH",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "38"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_HEURISTIC_TRIPPED_ZSCALER_CANARY",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "39"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_HEURISTIC_TRIPPED_CANARY",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "40"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_HEURISTIC_TRIPPED_MODIFIED_ROOTS",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "41"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_HEURISTIC_TRIPPED_PARENTAL_CONTROLS",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "42"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_HEURISTIC_TRIPPED_THIRD_PARTY_ROOTS",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "43"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_HEURISTIC_TRIPPED_ENTERPRISE_POLICY",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "44"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_HEURISTIC_TRIPPED_VPN",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "45"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_HEURISTIC_TRIPPED_PROXY",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "46"
                          }
                        }
                      },
                      {
                        "kind": "cenumlist_$0",
                        "value": {
                          "kind": "cenum",
                          "comment": [],
                          "identifier": "TRR_HEURISTIC_TRIPPED_NRPT",
                          "value": {
                            "kind": "cenum_$0",
                            "value": "47"
                          }
                        }
                      }
                    ]
                  }
                }
              }
            }
          ]
        }
      }
    },
    "\n\n",
    "%{ C++\nnamespace mozilla {\nnamespace net {\n\nusing TRRSkippedReason = nsITRRSkipReason::value;\n\ninline bool IsRelevantTRRSkipReason(TRRSkippedReason aReason) {\n  // - TRR_REQ_MODE_DISABLED - these requests are intentionally skipping TRR.\n  //     These include DNS queries used to bootstrap the TRR connection,\n  //     captive portal checks, connectivity checks, etc.\n  //     Since we don't want to use TRR for these connections, we don't need\n  //     to include them with other relevant skip reasons.\n  // - TRR_DISABLED_FLAG - This reason is used when retrying failed connections,\n  //    sync DNS resolves on the main thread, or requests coming from\n  //    webextensions that choose to skip TRR\n  // - TRR_EXCLUDED - This reason is used when a certain domain is excluded\n  //    from TRR because it is explicitly set by the user, or because it\n  //    is part of the user's DNS suffix list, indicating a host that is likely\n  //    to be on the local network.\n  if (aReason == TRRSkippedReason::TRR_REQ_MODE_DISABLED ||\n      aReason == TRRSkippedReason::TRR_DISABLED_FLAG ||\n      aReason == TRRSkippedReason::TRR_EXCLUDED) {\n    return false;\n  }\n  return true;\n}\n\ninline bool IsBlockedTRRRequest(TRRSkippedReason aReason) {\n  // See TRR::MaybeBlockRequest. These are the reasons that could block sending\n  // TRR requests.\n  return (aReason == TRRSkippedReason::TRR_EXCLUDED ||\n          aReason == TRRSkippedReason::TRR_MODE_NOT_ENABLED ||\n          aReason == TRRSkippedReason::TRR_HOST_BLOCKED_TEMPORARY);\n}\n\ninline bool IsNonRecoverableTRRSkipReason(TRRSkippedReason aReason) {\n  // These are non-recoverable reasons and we'll fallback to native without\n  // retrying.\n  return (aReason == TRRSkippedReason::TRR_NXDOMAIN ||\n          aReason == TRRSkippedReason::TRR_NO_ANSWERS ||\n          aReason == TRRSkippedReason::TRR_DISABLED_FLAG ||\n          aReason == TRRSkippedReason::TRR_RCODE_FAIL);\n}\n\ninline bool IsFailedConfirmationOrNoConnectivity(TRRSkippedReason aReason) {\n  // TRR is in non-confirmed state now, so we don't try to use TRR at all.\n  return (aReason == TRRSkippedReason::TRR_NOT_CONFIRMED ||\n          aReason == TRRSkippedReason::TRR_NO_CONNECTIVITY);\n}\n\nextern nsresult GetTRRSkipReasonName(TRRSkippedReason aReason, nsACString& aName);\n\n} // net\n} // mozilla\n%}\n"
  ]
}
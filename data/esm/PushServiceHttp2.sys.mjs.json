[
  {
    "type": "variable-declaration",
    "id": "PushServiceHttp2",
    "line": 396,
    "typeEstimation": {
      "type": "object-estimation",
      "keys": [
        {
          "type": "object-property",
          "line": 397,
          "id": "_mainPushService"
        },
        {
          "type": "object-property",
          "line": 398,
          "id": "_serverURI"
        },
        {
          "type": "object-property",
          "line": 401,
          "id": "_conns",
          "comments": [
            {
              "description": "Keep information about all connections, e.g. the channel, listener...",
              "tags": [],
              "source": [
                {
                  "number": 0,
                  "source": "/**",
                  "tokens": {
                    "start": "",
                    "delimiter": "/**",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 1,
                  "source": " Keep information about all connections, e.g. the channel, listener...",
                  "tokens": {
                    "start": " ",
                    "delimiter": "",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "Keep information about all connections, e.g. the channel, listener...",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 2,
                  "source": "*/",
                  "tokens": {
                    "start": "",
                    "delimiter": "",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "*/",
                    "lineEnd": ""
                  }
                }
              ],
              "problems": []
            }
          ],
          "typeEstimation": {
            "type": "object-estimation",
            "keys": []
          }
        },
        {
          "type": "object-property",
          "line": 402,
          "id": "_started"
        },
        {
          "type": "object-property",
          "line": 405,
          "id": "_listenersPendingRetry",
          "comments": [
            {
              "description": "Set of SubscriptionListeners that are pending a subscription retry attempt.",
              "tags": [],
              "source": [
                {
                  "number": 0,
                  "source": "/**",
                  "tokens": {
                    "start": "",
                    "delimiter": "/**",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 1,
                  "source": " Set of SubscriptionListeners that are pending a subscription retry attempt.",
                  "tokens": {
                    "start": " ",
                    "delimiter": "",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "Set of SubscriptionListeners that are pending a subscription retry attempt.",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 2,
                  "source": "*/",
                  "tokens": {
                    "start": "",
                    "delimiter": "",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "*/",
                    "lineEnd": ""
                  }
                }
              ],
              "problems": []
            }
          ]
        },
        {
          "type": "object-method",
          "line": 407,
          "id": "newPushDB",
          "kind": "method",
          "params": []
        },
        {
          "type": "object-method",
          "line": 417,
          "id": "hasmainPushService",
          "kind": "method",
          "params": []
        },
        {
          "type": "object-method",
          "line": 421,
          "id": "connect",
          "kind": "method",
          "params": [
            "broadcastListeners"
          ]
        },
        {
          "type": "object-method",
          "line": 426,
          "id": "sendSubscribeBroadcast",
          "kind": "method",
          "params": [
            "serviceId",
            "version"
          ]
        },
        {
          "type": "object-method",
          "line": 430,
          "id": "isConnected",
          "kind": "method",
          "params": []
        },
        {
          "type": "object-method",
          "line": 434,
          "id": "disconnect",
          "kind": "method",
          "params": []
        },
        {
          "type": "object-method",
          "line": 438,
          "id": "_makeChannel",
          "kind": "method",
          "params": [
            "aUri"
          ]
        },
        {
          "type": "object-method",
          "line": 454,
          "id": "register",
          "comments": [
            {
              "description": "Subscribe new resource.",
              "tags": [],
              "source": [
                {
                  "number": 0,
                  "source": "/**",
                  "tokens": {
                    "start": "",
                    "delimiter": "/**",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 1,
                  "source": "*",
                  "tokens": {
                    "start": "",
                    "delimiter": "*",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 2,
                  "source": "   * Subscribe new resource.",
                  "tokens": {
                    "start": "   ",
                    "delimiter": "*",
                    "postDelimiter": " ",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "Subscribe new resource.",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 3,
                  "source": "   ",
                  "tokens": {
                    "start": "   ",
                    "delimiter": "",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 4,
                  "source": "*/",
                  "tokens": {
                    "start": "",
                    "delimiter": "",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "*/",
                    "lineEnd": ""
                  }
                }
              ],
              "problems": []
            }
          ],
          "kind": "method",
          "params": [
            "aRecord"
          ]
        },
        {
          "type": "object-method",
          "line": 478,
          "id": "_subscribeResourceInternal",
          "kind": "method",
          "params": [
            "aSubInfo"
          ]
        },
        {
          "type": "object-method",
          "line": 501,
          "id": "_deleteResource",
          "kind": "method",
          "params": [
            "aUri"
          ]
        },
        {
          "type": "object-method",
          "line": 513,
          "id": "_unsubscribeResource",
          "comments": [
            {
              "description": "Unsubscribe the resource with a subscription uri aSubscriptionUri. We can't do anything about it if it fails, so we don't listen for response.",
              "tags": [],
              "source": [
                {
                  "number": 0,
                  "source": "/**",
                  "tokens": {
                    "start": "",
                    "delimiter": "/**",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 1,
                  "source": "*",
                  "tokens": {
                    "start": "",
                    "delimiter": "*",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 2,
                  "source": "   * Unsubscribe the resource with a subscription uri aSubscriptionUri.",
                  "tokens": {
                    "start": "   ",
                    "delimiter": "*",
                    "postDelimiter": " ",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "Unsubscribe the resource with a subscription uri aSubscriptionUri.",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 3,
                  "source": "   * We can't do anything about it if it fails, so we don't listen for response.",
                  "tokens": {
                    "start": "   ",
                    "delimiter": "*",
                    "postDelimiter": " ",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "We can't do anything about it if it fails, so we don't listen for response.",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 4,
                  "source": "   ",
                  "tokens": {
                    "start": "   ",
                    "delimiter": "",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 5,
                  "source": "*/",
                  "tokens": {
                    "start": "",
                    "delimiter": "",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "*/",
                    "lineEnd": ""
                  }
                }
              ],
              "problems": []
            }
          ],
          "kind": "method",
          "params": [
            "aSubscriptionUri"
          ]
        },
        {
          "type": "object-method",
          "line": 522,
          "id": "_listenForMsgs",
          "comments": [
            {
              "description": "Start listening for messages.",
              "tags": [],
              "source": [
                {
                  "number": 0,
                  "source": "/**",
                  "tokens": {
                    "start": "",
                    "delimiter": "/**",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 1,
                  "source": "*",
                  "tokens": {
                    "start": "",
                    "delimiter": "*",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 2,
                  "source": "   * Start listening for messages.",
                  "tokens": {
                    "start": "   ",
                    "delimiter": "*",
                    "postDelimiter": " ",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "Start listening for messages.",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 3,
                  "source": "   ",
                  "tokens": {
                    "start": "   ",
                    "delimiter": "",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 4,
                  "source": "*/",
                  "tokens": {
                    "start": "",
                    "delimiter": "",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "*/",
                    "lineEnd": ""
                  }
                }
              ],
              "problems": []
            }
          ],
          "kind": "method",
          "params": [
            "aSubscriptionUri"
          ]
        },
        {
          "type": "object-method",
          "line": 559,
          "id": "_ackMsgRecv",
          "kind": "method",
          "params": [
            "aAckUri"
          ]
        },
        {
          "type": "object-method",
          "line": 564,
          "id": "init",
          "kind": "method",
          "params": [
            "aOptions",
            "aMainPushService",
            "aServerURL"
          ]
        },
        {
          "type": "object-method",
          "line": 572,
          "id": "_retryAfterBackoff",
          "kind": "method",
          "params": [
            "aSubscriptionUri",
            "retryAfter"
          ]
        },
        {
          "type": "object-method",
          "line": 617,
          "id": "_shutdownConnections",
          "comments": [
            {
              "description": "Close connections.",
              "tags": [],
              "source": [
                {
                  "number": 0,
                  "source": "/**",
                  "tokens": {
                    "start": "",
                    "delimiter": "/**",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 1,
                  "source": " Close connections.",
                  "tokens": {
                    "start": " ",
                    "delimiter": "",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "Close connections.",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 2,
                  "source": "*/",
                  "tokens": {
                    "start": "",
                    "delimiter": "",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "*/",
                    "lineEnd": ""
                  }
                }
              ],
              "problems": []
            }
          ],
          "kind": "method",
          "params": [
            "deleteInfo"
          ]
        },
        {
          "type": "object-method",
          "line": 646,
          "id": "startConnections",
          "comments": [
            {
              "description": "Start listening if subscriptions present.",
              "tags": [],
              "source": [
                {
                  "number": 0,
                  "source": "/**",
                  "tokens": {
                    "start": "",
                    "delimiter": "/**",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 1,
                  "source": " Start listening if subscriptions present.",
                  "tokens": {
                    "start": " ",
                    "delimiter": "",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "Start listening if subscriptions present.",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 2,
                  "source": "*/",
                  "tokens": {
                    "start": "",
                    "delimiter": "",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "*/",
                    "lineEnd": ""
                  }
                }
              ],
              "problems": []
            }
          ],
          "kind": "method",
          "params": [
            "aSubscriptions"
          ]
        },
        {
          "type": "object-method",
          "line": 666,
          "id": "_startSingleConnection",
          "kind": "method",
          "params": [
            "record"
          ]
        },
        {
          "type": "object-method",
          "line": 682,
          "id": "_shutdownSubscription",
          "comments": [
            {
              "description": "Close connection and notify apps that subscription are gone.",
              "tags": [],
              "source": [
                {
                  "number": 0,
                  "source": "/**",
                  "tokens": {
                    "start": "",
                    "delimiter": "/**",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 1,
                  "source": " Close connection and notify apps that subscription are gone.",
                  "tokens": {
                    "start": " ",
                    "delimiter": "",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "Close connection and notify apps that subscription are gone.",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 2,
                  "source": "*/",
                  "tokens": {
                    "start": "",
                    "delimiter": "",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "*/",
                    "lineEnd": ""
                  }
                }
              ],
              "problems": []
            }
          ],
          "kind": "method",
          "params": [
            "aSubscriptionUri"
          ]
        },
        {
          "type": "object-method",
          "line": 699,
          "id": "uninit",
          "kind": "method",
          "params": []
        },
        {
          "type": "object-method",
          "line": 706,
          "id": "_abortPendingSubscriptionRetries",
          "kind": "method",
          "params": []
        },
        {
          "type": "object-method",
          "line": 711,
          "id": "unregister",
          "kind": "method",
          "params": [
            "aRecord"
          ]
        },
        {
          "type": "object-method",
          "line": 716,
          "id": "reportDeliveryError",
          "kind": "method",
          "params": [
            "messageID",
            "reason"
          ]
        },
        {
          "type": "object-method",
          "line": 730,
          "id": "_resubscribe",
          "comments": [
            {
              "description": "Push server has deleted subscription. Re-subscribe - if it succeeds send update db record and send pushsubscriptionchange, - on error delete record and send pushsubscriptionchange TODO: maybe pushsubscriptionerror will be included.",
              "tags": [],
              "source": [
                {
                  "number": 0,
                  "source": "/**",
                  "tokens": {
                    "start": "",
                    "delimiter": "/**",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 1,
                  "source": "* Push server has deleted subscription.",
                  "tokens": {
                    "start": "",
                    "delimiter": "*",
                    "postDelimiter": " ",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "Push server has deleted subscription.",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 2,
                  "source": "   *  Re-subscribe - if it succeeds send update db record and send",
                  "tokens": {
                    "start": "   ",
                    "delimiter": "*",
                    "postDelimiter": "  ",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "Re-subscribe - if it succeeds send update db record and send",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 3,
                  "source": "   *                 pushsubscriptionchange,",
                  "tokens": {
                    "start": "   ",
                    "delimiter": "*",
                    "postDelimiter": "                 ",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "pushsubscriptionchange,",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 4,
                  "source": "   *               - on error delete record and send pushsubscriptionchange",
                  "tokens": {
                    "start": "   ",
                    "delimiter": "*",
                    "postDelimiter": "               ",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "- on error delete record and send pushsubscriptionchange",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 5,
                  "source": "   *  TODO: maybe pushsubscriptionerror will be included.",
                  "tokens": {
                    "start": "   ",
                    "delimiter": "*",
                    "postDelimiter": "  ",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "TODO: maybe pushsubscriptionerror will be included.",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 6,
                  "source": "   ",
                  "tokens": {
                    "start": "   ",
                    "delimiter": "",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "",
                    "lineEnd": ""
                  }
                },
                {
                  "number": 7,
                  "source": "*/",
                  "tokens": {
                    "start": "",
                    "delimiter": "",
                    "postDelimiter": "",
                    "tag": "",
                    "postTag": "",
                    "name": "",
                    "postName": "",
                    "type": "",
                    "postType": "",
                    "description": "",
                    "end": "*/",
                    "lineEnd": ""
                  }
                }
              ],
              "problems": []
            }
          ],
          "kind": "method",
          "params": [
            "aSubscriptionUri"
          ]
        },
        {
          "type": "object-method",
          "line": 751,
          "id": "connOnStop",
          "kind": "method",
          "params": [
            "aRequest",
            "aSuccess",
            "aSubscriptionUri"
          ]
        },
        {
          "type": "object-method",
          "line": 781,
          "id": "addListenerPendingRetry",
          "kind": "method",
          "params": [
            "aListener"
          ]
        },
        {
          "type": "object-method",
          "line": 785,
          "id": "removeListenerPendingRetry",
          "kind": "method",
          "params": [
            "aListener"
          ]
        },
        {
          "type": "object-method",
          "line": 791,
          "id": "_pushChannelOnStop",
          "kind": "method",
          "params": [
            "aUri",
            "aAckUri",
            "aHeaders",
            "aMessage"
          ]
        }
      ]
    }
  }
]